# Using Python to Interact with the Operating System - Week 2 - Managing Files with Python

## Reading and Writing Files
### Programming with Files
* File systems are usually organized in a **tree structure** with directories and files nested under their parents.
  * A relative paths use only a portion of a path to show where the resource is located in relation to the current working directory.
  * An absolute path is a full path to the resource in the file system.

### Reading Files
* When processing large chunks of data, it's a good idea to read that data from files.
  * **readline method** reads a single line of a file and updates the current position in the file.
  * **read method** reads from the current position until the end of the file instead of just one line.
* The *open-use-close pattern* is a typical way of working with files in most programming languages. It's a good idea to close files after you've opened them for a few reasons.
  * When a file is opening a script, the file system usually lock it down and so no other programs or scripts can use it until it is closed.
  * There's a limited number of file descriptors that can be creates before file system runs out of them.
  * Leaving open files hanging around can lead to race conditions which occur when multiple processes try to modify and read from one resource at the same time and can cause unexpected behavior.
* In Python, file descriptor is stored as an attribute of the files object. This is a token generated by the OS that allows programs to do more operations with the file.
* The *with* keyword creates a block of code with the code to be excuted inside of it. When we use a *with* block, Python will automatically close the file.
* The *open-use-close* approach vs. the *with* approach.
  * Using a *with* block is a good way to open and work on a single file then have the file automatically closed at the end of the block.
  * Using open outside of a block means we can use a file object in other places in our code. So we're not restricted to just one single block. But when taking this approach, we need to remember to close it when we're finished.

### Iterating through Files
* There are 2 ways to iterate a file object:
  1. Iterate the file object like list or strings
  2. Iterates the file object by reading the file lines into a list
      * When Python reads the file line by line, the line variable will always have a new line character at the end.
* The file has a new line character at the end of each line.
  * Empty lines can be avoided by using strip method.
* Python uses backlashes to display some of special symbols or operations:-
  * A newline character is displayed using "\n" symbol when printing a list of strings.
  * 'tab' is displayed using \t.
  * A single or double quote can be displayed using backlashes as well.
* Be careful when reading the entire contents of a file into a variable of our programs:-
  * If the file is large, it can take a lot of computer's memory to hold it, which can lead to poor performance. 
  * If a file is just a few kilobytes, it's more efficient to process it line by line.

### Writing Files
* File objects can be opened in several different modes. A mode is similar to a file permission. It governs what can be done with the file.
* | Character | Meaning                                                         |
  | :-:       | :-:                                                             |
  | r         | open for reading (default)                                      |
  | w         | open for writing, truncating the file first                     |
  | x         | open for exclusive creation, failing if the file already exists |
  | a         | open for writing, appending to the end of the file if it exists |
  | b         | binary mode                                                     |
  | t         | text mode (default)                                             |
  | +         | open for updating (reading and writing)                         |
  
---

## Managing Files and Directories
### Working with Files
* **os module** provides a layer of abstraction between Python and the operating system which allows us to interact with the underlying system without us knowing whether we're working on a Windows, Mac, Linux, or any other operating system supported by Python.
* Some of the functions available from the os module are:-
  * Remove function deletes a file.
    * Trying to remove the file that doesn't exist, the function will raise an error.
  * Exists function checks whether a file exist.
  * Rename function changes name of a file.
    * The first parameter to rename function is the old name of the file and the second is new name.

### More File Informations
* **getsize** checks a file size and returns the file size in bytes.
* **getmitime** checks when the file was last modified and returns Unix timestamp.
* **abspath** function takes a filename and turns it into an absolute path.
* **datetime module** provides a function to convert the Unix timestamp.

---

## Reading and Writing CSV Files
### What is a CSV file?
* CSV or comma separated values is a very common data format used to store data as segment of text separated by commas.
* This format lets us easily store and retrieve information that we might need for our scripts like employees in our company or computer's inner network.
* A lot of programs are capable of exporting data as CSV files, such as spreadsheet applications like Microsoft Excel or Google Sheets. 
* It can actually be helpful to think of a CSV file like it's a spreadsheet, where each line corresponds to a row and each comma separated field corresponds to a column. 

### Reading CSV Files
* CSV files are stored in plaintext. 
* Each line in a CSV file generally represents a single data record.
* Each field in that record is separated by a comma, with the contents of the field stored between the commas.
* CSV module is used to parse a CSV file, with reader function, csv.reader().

### Generating CSV
* This uses the writer function of the CSV module, csv.writer().

### Reading and Writing CSV Files with Dictionaries
* This uses a slightly different reader of the CSV module, using DictReader, csv.DictReader().
  * This reader turns each row of the data in a CSV file into a dictionary. 
  * We can then access the data by using the column names instead of the position in the row.

---

## Credit
* [Coursera - Using Python to Interact with the Operating System - Week 2 - Managing Files with Python](https://www.coursera.org/learn/python-operating-system/home/week/2)
